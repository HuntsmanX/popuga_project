# Popuga Project

## Разобраться, какие сервисы, кроме тудушника, будут в нашей системе и какие между ними могут быть связи (как синхронные, так и асинхронные). Также стоит разобраться, где использовать CUD-события, а где — бизнес-события.
###Описание системы
1. **Общие Микросеривсы**
    * **Gateway** - обозначает периметр нашей системы + базовые валидации IP, etc. + проксирование
    * **Permissions** - я решил вынести данный микросервис на общий уровень, т.к. иначе пришлось бы в каждом "домене" плодить свои микросервисы с пермишенвми
2. **Авторизация** (Процесс регистрации выполняется синхронно с помощью патерна Saga)
      * **Authentication** — содержит базовую логику для авторизации + базу данных для связи `user.id` + `login type (email, phone, etc)` + `password`
      * **User** — Общая информация о пользователе
      * **Account** - User.id + Roles Info
      * **Auth SPA** - FE для авторизации
   
Также добавлены такие элементы как Redis - хранение сессии и ElasticSearch (наполняется асинхронно, нужен для хранения информации о пользователях + вывод на FE + фильтрация)   
##auth
![auth](images/auth.png)

3. **Таск Management**
      * **Tasks** — Cодержит базовую информацию о таске + базу данных
      * **Account** — Микросервис c бд для связи `user.id` + `task.id`
      * **Tasks Notifications** - Микросервис для работы с нотификашками (работаем асинхронно)
      * **ElasticSearch (UsersTask)** докумет который наполняется асинхронно и служит вывода информации о таске юзера (срез всех тасков с юзерам) + вывод на FE + фильтрация
      * **Tasks SPA** — FE для тасков
##tasks   
![tasks](images/tasks.png)

4. **Accounting Management**
   * **Salary** — Микросервис c бд для связи `task.id` + `amount`
   * **Account** — Микросервис c бд для связи `user.id` + `task.id` + `transactions`
   * **Transactions** - Микросервис для работы транзакциями
   * **Wallet** - Микросервис который является отображением денег у юзера исходя из транзакций
   * **Salary Notifications** — Микросервис для работы с нотификашками (работаем асинхронно)
   * **Accounting SPA** — FE для аккаутинга
   * **ElasticSearch (UserSalary)** — докумет который наполняется асинхронно и служит вывода информации о зп. юзера  + вывод на FE + фильтрация
##amount
![amount](images/amount.png)

4. **Audit Management**
   * **Audit** — Микросервис c бд для аналитики
   * **Account** — Микросервис c бд для связи
   * **Audit SPA** - FE для аналитики
##amount
![audit](images/audit.png)

## Общая схема
![general](images/general.png)

## CUD Process - отмечены пунктирными линиями
## Business Process - остальные